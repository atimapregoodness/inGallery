<title>Dashboard - inGallery</title>
<%- layout('layout/userBoilerplate') %>

<div id="imgPreview">
  <div class="topBar">
    <h1><%= img.filename %></h1>
  </div>
  <div class="imgSection2">
    <div class="header">
      <h3><% %></h3>
    </div>
    <div class="imgPreview">
      <img src="<%= img.url %>" alt="<%= img.filename %>" />
      <button
        class="downloadBtn"
        onclick="downloadImage('<%= img.url %>', '<%= img.filename %>')"
      >
        Download
      </button>
    </div>
  </div>
</div>

<script>
  function downloadImage(url, filename) {
    fetch(url)
      .then((response) => response.blob())
      .then((blob) => {
        const link = document.createElement("a");
        link.href = URL.createObjectURL(blob);
        link.download = filename;
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
      })
      .catch((err) => console.error("Error downloading the image:", err));
  }
</script>
