<title>Profile | inGallery</title>
<%- layout('layout/userBoilerplate') %>
<div class="bodyContainer" id="walletBody">
  <%-include('../partials/sideBar') %>
  <div class="profile">
    <div><%- include('../partials/err') %></div>
    <div class="container">
      <div class="profileImg">
        <div class="imgContainer">
          <img
            src="<%= user.profileImg%>"
            alt="Profile Picture"
            id="profileImg"
          />
        </div>
        <div class="profileActions">
          <button class="editBtn popUpBtn">
            <i class="fa-solid fa-pen-to-square"></i> Edit Profile
          </button>
          <a href="/user/profile">
            <button class="viewProfileBtn">
              <i class="fa-solid fa-user"></i> View Profile
            </button>
          </a>
        </div>
      </div>

      <div class="details">
        <div class="personal">
          <div class="contents">
            <h1>Details:</h1>
            <p class="username">
              User Name: <span><%= user.username || "Not Provided"%></span>
            </p>
            <p>
              First Name: <span><%= user.firstName || 'Not Provided' %></span>
            </p>
            <p>
              Last Name: <span><%= user.lastName || 'Not Provided' %></span>
            </p>
            <p>Email: <span><%= user.email %></span></p>
            <p>Phone: <span><%= user.phone || 'Not Provided' %></span></p>
            <p>Location: <span><%= user.location || 'Not Provided' %></span></p>
            <p>
              Joined:
              <span><%= new Date(user.createdAt).toLocaleDateString() %></span>
            </p>
          </div>
          <div class="profileActions">
            <button class="editBtn">Edit Profile</button>
            <a href="/user/profile/settings">
              <button class="settingsBtn">Settings</button>
            </a>
          </div>
          <div class="popUpBox">
            <div id="pupUpContent" class="profileEdit">
              <div class="profileContainer">
                <div><%- include('../partials/err') %></div>
                <div class="container">
                  <div class="editProfile">
                    <div id="imgContainer">
                      <img
                        src="<%= user.profileImg ? user.profileImg : '/assets/images/no-profile.png' %>"
                        alt="Profile Picture"
                        id="profileImg"
                        class="changeProfileImg"
                      />
                    </div>
                    <form
                      action="/user/profile/edit-profile"
                      method="post"
                      enctype="multipart/form-data"
                    >
                      <input
                        type="hidden"
                        name="userId"
                        id="userId"
                        value="<%= user._id %>"
                        required
                      />
                      <input
                        type="file"
                        name="profileImg"
                        id="profileImgInput"
                        accept="image/*"
                        class="d-none"
                      />
                      <button
                        type="button"
                        class="btn btn-danger"
                        id="closeButton"
                      >
                        <i class="fa-solid fa-arrow-left"></i> Back
                      </button>

                      <label for="profileImgInput" class="btn btn-primary">
                        <i class="fa-solid fa-pen-to-square"></i> Edit
                      </label>
                      <button
                        type="submit"
                        class="btn btn-success"
                        id="imgSubmit"
                      >
                        <i class="fa-regular fa-circle-check"></i> Save
                      </button>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
